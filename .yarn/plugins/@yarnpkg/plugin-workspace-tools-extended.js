/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-workspace-tools-extended",
factory: function (require) {
var plugin=(()=>{var le=Object.create,$=Object.defineProperty;var ce=Object.getOwnPropertyDescriptor;var pe=Object.getOwnPropertyNames;var Ee=Object.getPrototypeOf,he=Object.prototype.hasOwnProperty;var ue=r=>$(r,"__esModule",{value:!0});var h=r=>{if(typeof require!="undefined")return require(r);throw new Error('Dynamic require of "'+r+'" is not supported')};var I=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Ie=(r,e)=>{for(var t in e)$(r,t,{get:e[t],enumerable:!0})},fe=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of pe(e))!he.call(r,i)&&i!=="default"&&$(r,i,{get:()=>e[i],enumerable:!(t=ce(e,i))||t.enumerable});return r},E=r=>fe(ue($(r!=null?le(Ee(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var A=I((je,x)=>{var me="2.0.0",de=256,Re=Number.MAX_SAFE_INTEGER||9007199254740991,ge=16;x.exports={SEMVER_SPEC_VERSION:me,MAX_LENGTH:de,MAX_SAFE_INTEGER:Re,MAX_SAFE_COMPONENT_LENGTH:ge}});var y=I((Xe,U)=>{var Ne=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};U.exports=Ne});var b=I((u,M)=>{var{MAX_SAFE_COMPONENT_LENGTH:D}=A(),Le=y();u=M.exports={};var Oe=u.re=[],s=u.src=[],a=u.t={},$e=0,n=(r,e,t)=>{let i=$e++;Le(i,e),a[r]=i,s[i]=e,Oe[i]=new RegExp(e,t?"g":void 0)};n("NUMERICIDENTIFIER","0|[1-9]\\d*");n("NUMERICIDENTIFIERLOOSE","[0-9]+");n("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");n("MAINVERSION",`(${s[a.NUMERICIDENTIFIER]})\\.(${s[a.NUMERICIDENTIFIER]})\\.(${s[a.NUMERICIDENTIFIER]})`);n("MAINVERSIONLOOSE",`(${s[a.NUMERICIDENTIFIERLOOSE]})\\.(${s[a.NUMERICIDENTIFIERLOOSE]})\\.(${s[a.NUMERICIDENTIFIERLOOSE]})`);n("PRERELEASEIDENTIFIER",`(?:${s[a.NUMERICIDENTIFIER]}|${s[a.NONNUMERICIDENTIFIER]})`);n("PRERELEASEIDENTIFIERLOOSE",`(?:${s[a.NUMERICIDENTIFIERLOOSE]}|${s[a.NONNUMERICIDENTIFIER]})`);n("PRERELEASE",`(?:-(${s[a.PRERELEASEIDENTIFIER]}(?:\\.${s[a.PRERELEASEIDENTIFIER]})*))`);n("PRERELEASELOOSE",`(?:-?(${s[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[a.PRERELEASEIDENTIFIERLOOSE]})*))`);n("BUILDIDENTIFIER","[0-9A-Za-z-]+");n("BUILD",`(?:\\+(${s[a.BUILDIDENTIFIER]}(?:\\.${s[a.BUILDIDENTIFIER]})*))`);n("FULLPLAIN",`v?${s[a.MAINVERSION]}${s[a.PRERELEASE]}?${s[a.BUILD]}?`);n("FULL",`^${s[a.FULLPLAIN]}$`);n("LOOSEPLAIN",`[v=\\s]*${s[a.MAINVERSIONLOOSE]}${s[a.PRERELEASELOOSE]}?${s[a.BUILD]}?`);n("LOOSE",`^${s[a.LOOSEPLAIN]}$`);n("GTLT","((?:<|>)?=?)");n("XRANGEIDENTIFIERLOOSE",`${s[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);n("XRANGEIDENTIFIER",`${s[a.NUMERICIDENTIFIER]}|x|X|\\*`);n("XRANGEPLAIN",`[v=\\s]*(${s[a.XRANGEIDENTIFIER]})(?:\\.(${s[a.XRANGEIDENTIFIER]})(?:\\.(${s[a.XRANGEIDENTIFIER]})(?:${s[a.PRERELEASE]})?${s[a.BUILD]}?)?)?`);n("XRANGEPLAINLOOSE",`[v=\\s]*(${s[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[a.XRANGEIDENTIFIERLOOSE]})(?:${s[a.PRERELEASELOOSE]})?${s[a.BUILD]}?)?)?`);n("XRANGE",`^${s[a.GTLT]}\\s*${s[a.XRANGEPLAIN]}$`);n("XRANGELOOSE",`^${s[a.GTLT]}\\s*${s[a.XRANGEPLAINLOOSE]}$`);n("COERCE",`(^|[^\\d])(\\d{1,${D}})(?:\\.(\\d{1,${D}}))?(?:\\.(\\d{1,${D}}))?(?:$|[^\\d])`);n("COERCERTL",s[a.COERCE],!0);n("LONETILDE","(?:~>?)");n("TILDETRIM",`(\\s*)${s[a.LONETILDE]}\\s+`,!0);u.tildeTrimReplace="$1~";n("TILDE",`^${s[a.LONETILDE]}${s[a.XRANGEPLAIN]}$`);n("TILDELOOSE",`^${s[a.LONETILDE]}${s[a.XRANGEPLAINLOOSE]}$`);n("LONECARET","(?:\\^)");n("CARETTRIM",`(\\s*)${s[a.LONECARET]}\\s+`,!0);u.caretTrimReplace="$1^";n("CARET",`^${s[a.LONECARET]}${s[a.XRANGEPLAIN]}$`);n("CARETLOOSE",`^${s[a.LONECARET]}${s[a.XRANGEPLAINLOOSE]}$`);n("COMPARATORLOOSE",`^${s[a.GTLT]}\\s*(${s[a.LOOSEPLAIN]})$|^$`);n("COMPARATOR",`^${s[a.GTLT]}\\s*(${s[a.FULLPLAIN]})$|^$`);n("COMPARATORTRIM",`(\\s*)${s[a.GTLT]}\\s*(${s[a.LOOSEPLAIN]}|${s[a.XRANGEPLAIN]})`,!0);u.comparatorTrimReplace="$1$2$3";n("HYPHENRANGE",`^\\s*(${s[a.XRANGEPLAIN]})\\s+-\\s+(${s[a.XRANGEPLAIN]})\\s*$`);n("HYPHENRANGELOOSE",`^\\s*(${s[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[a.XRANGEPLAINLOOSE]})\\s*$`);n("STAR","(<|>)?=?\\s*\\*");n("GTE0","^\\s*>=\\s*0.0.0\\s*$");n("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var G=I((Be,j)=>{var Ae=["includePrerelease","loose","rtl"],Te=r=>r?typeof r!="object"?{loose:!0}:Ae.filter(e=>r[e]).reduce((e,t)=>(e[t]=!0,e),{}):{};j.exports=Te});var H=I((qe,q)=>{var X=/^[0-9]+$/,B=(r,e)=>{let t=X.test(r),i=X.test(e);return t&&i&&(r=+r,e=+e),r===e?0:t&&!i?-1:i&&!t?1:r<e?-1:1},we=(r,e)=>B(e,r);q.exports={compareIdentifiers:B,rcompareIdentifiers:we}});var Y=I((He,Z)=>{var T=y(),{MAX_LENGTH:_,MAX_SAFE_INTEGER:w}=A(),{re:W,t:z}=b(),ke=G(),{compareIdentifiers:N}=H(),c=class{constructor(e,t){if(t=ke(t),e instanceof c){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>_)throw new TypeError(`version is longer than ${_} characters`);T("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let i=e.trim().match(t.loose?W[z.LOOSE]:W[z.FULL]);if(!i)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>w||this.major<0)throw new TypeError("Invalid major version");if(this.minor>w||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>w||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let l=+o;if(l>=0&&l<w)return l}return o}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(T("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if(typeof e=="string"&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof c||(e=new c(e,this.options)),N(this.major,e.major)||N(this.minor,e.minor)||N(this.patch,e.patch)}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let i=this.prerelease[t],o=e.prerelease[t];if(T("prerelease compare",t,i,o),i===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(i===void 0)return-1;if(i===o)continue;return N(i,o)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{let i=this.build[t],o=e.build[t];if(T("prerelease compare",t,i,o),i===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(i===void 0)return-1;if(i===o)continue;return N(i,o)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);i===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};Z.exports=c});var ee=I((_e,Q)=>{var{MAX_LENGTH:Ce}=A(),{re:J,t:V}=b(),K=Y(),Se=G(),Pe=(r,e)=>{if(e=Se(e),r instanceof K)return r;if(typeof r!="string"||r.length>Ce||!(e.loose?J[V.LOOSE]:J[V.FULL]).test(r))return null;try{return new K(r,e)}catch(i){return null}};Q.exports=Pe});var xe={};Ie(xe,{default:()=>ve});var k=E(h("@yarnpkg/cli")),f=E(h("@yarnpkg/core")),p=E(h("clipanion"));function m(r=[]){let e=r.filter(t=>typeof t=="string");return console.info(e.join(" ")),e}var re=E(ee()),ye=(r=[])=>m(["npm","publish",...r]),L=class extends k.BaseCommand{constructor(){super(...arguments);this.all=p.Option.Boolean("-A,--all",!1,{description:"Publish all public repositories in the current project."});this.canary=p.Option.Boolean("-C,--canary",!1,{description:"Tags the release as `canary`. The standard prerelease tag for @FuelRats projects."});this.tag=p.Option.String("--tag",null,{description:"The tag on the registry that the package should be attached to. Ignored if `-C,--canary` or `--unsafe-latest` is used."});this.tolerateRepublish=p.Option.Boolean("--tolerate-republish",!1,{description:"Warn and exit when republishing an already existing version of a package."});this.unsafe=p.Option.Boolean("--unsafe-latest",!1,{description:"Force a publish to the `latest` tag, sidestepping prerelease tagging protections."});this.packages=p.Option.Rest()}async execute(){let e=await f.Configuration.find(this.context.cwd,this.context.plugins),{project:t,workspace:i}=await f.Project.find(e,this.context.cwd),o;if(this.all)o=t.workspaces.reduce((l,g)=>(g.manifest.private||l.push(g),l),[]);else if(this.packages.length>0){if(!i)throw new k.WorkspaceRequiredError(t.cwd,this.context.cwd);o=this.packages.map(l=>{let g=f.structUtils.parseIdent(l),v=t.getWorkspaceByIdent(g);if(v.manifest.private)throw new p.UsageError(`Workspace ${f.structUtils.prettyIdent(e,g)} is private and cannot be published. Aborting...`);return v})}if(!o||o.length===0)throw new p.UsageError("No project workspace could be resolved. Please provide at least one valid package name, or `-A,--all`");for(let l of o)await this.cli.run(ye([this.getTagArg(l),this.tolerateRepublishArg]),{cwd:l.cwd})}getTagArg(e){var i;if(this.unsafe)return null;let t=null;if(this.canary)t="canary";else if(this.tag)t=this.tag;else{let o=(0,re.default)(e.manifest.version,{includePrerelease:!0}),l=(i=o==null?void 0:o.prerelease)==null?void 0:i[0];typeof l=="string"&&(t=l)}return t?`--tag=${t}`:null}get tolerateRepublishArg(){return this.tolerateRepublish?"--tolerate-republish":null}};L.paths=[["workspaces","release"]],L.usage=p.Command.Usage({category:"Workspace-related commands",description:"Publish a list of workspaces in the project.",details:"\n      This command will publish a list of packages, or optionally, all packages of a workspace.\n\n      If a prerelease suffix is detected (e.g. `1.2.3-suffix.0`) in the package version, the package will be published under that suffix instead of `latest`.\n    ",examples:[["Release all public packages in the current project","$0 workspaces release --all"],["Release a subset of packages based on their names","$0 workspaces release package1 package2"],["Unsafely release a package with a prerelease suffix","$0 workspaces release --unsafe-latest package1"]]});var te=L;var S=E(h("@yarnpkg/cli")),P=E(h("@yarnpkg/core")),R=E(h("clipanion"));var C=E(h("@yarnpkg/core")),se=E(h("clipanion"));function F(r,e){e.forEach(t=>{let i=`@yarnpkg/plugin-${t}`;if(!r.plugins.has(i)){let o=C.structUtils.prettyIdent(r,C.structUtils.parseIdent(i)),l=C.structUtils.prettyReference(r,`yarn plugin import ${t}`);throw new se.UsageError(`${o} is a required plugin. Please import it by using '${l}'`)}})}var ne=E(h("typanion"));var ae=E(h("clipanion")),d;(function(i){i.MAJOR="major",i.MINOR="minor",i.PATCH="patch"})(d||(d={}));function ie(r){if(!Object.values(d).includes(r))throw new ae.UsageError(`Cannot apply the release strategy '${r}'. Strategy must be one of: ${Object.values(d).map(e=>`'${e}'`).join(", ")}`)}var De=(r=[])=>m(["version","apply","--all",...r]),be=(r=[])=>m(["version","--deferred",...r]),Ge=(r=[])=>m(["workspaces","foreach",...r]),O=class extends S.BaseCommand{constructor(){super(...arguments);this.canary=R.Option.Boolean("-C,--canary",!1,{description:"Sets the prerelease suffix to `canary`. The standard suffix for @FuelRats projects."});this.tag=R.Option.String("--tag",null,{description:"Sets the prerelease suffix to a specified value. Ignored if `-C,--canary` is used."});this.strategy=R.Option.String({required:!0,validator:ne.isEnum(d)})}async execute(){let e=await P.Configuration.find(this.context.cwd,this.context.plugins),{project:t,workspace:i}=await P.Project.find(e,this.context.cwd);if(!i)throw new S.WorkspaceRequiredError(t.cwd,this.context.cwd);F(e,["workspace-tools","version"]),ie(this.strategy);let o=be([this.strategy]);await this.cli.run(Ge(o)),await this.cli.run(o),await this.cli.run(De([this.tagArg]))}get tagArg(){return this.canary?"--prerelease=canary.%n":this.tag?`--prerelease=${this.tag}.%n`:null}};O.paths=[["workspaces","version"]],O.usage=R.Command.Usage({category:"Workspace-related commands",description:"Update the project-wide fixed semver.",details:"\n      This command will bump the version number of all workspaces in the project, then the project package itself.\n\n      Strategy must be one of: `major`, `minor`, or `patch`.\n\n      prereleases must have a string suffix with this tool.\n    ",examples:[["Bump the minor semver project-wide","$0 workspaces version minor"],["Bump the project-wide semver to a new minor-ver prerelease","$0 workspaces version -C minor"]]});var oe=O;var Fe={commands:[oe,te]},ve=Fe;return xe;})();
return plugin;
}
};
