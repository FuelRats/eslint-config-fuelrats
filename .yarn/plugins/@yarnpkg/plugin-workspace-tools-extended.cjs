/* eslint-disable */
module.exports = {
name: "@yarnpkg/plugin-workspace-tools-extended",
factory: function (require) {
var plugin;(()=>{var e={863:(e,t,r)=>{const s=r(348),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=r(406),{re:a,t:n}=r(91),l=r(927),{compareIdentifiers:c}=r(32);class p{constructor(e,t){if(t=l(t),e instanceof p){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);s("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?a[n.LOOSE]:a[n.FULL]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version}toString(){return this.version}compare(e){if(s("SemVer.compare",this.version,this.options,e),!(e instanceof p)){if("string"==typeof e&&e===this.version)return 0;e=new p(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof p||(e=new p(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof p||(e=new p(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],i=e.prerelease[t];if(s("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return c(r,i)}while(++t)}compareBuild(e){e instanceof p||(e=new p(e,this.options));let t=0;do{const r=this.build[t],i=e.build[t];if(s("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return c(r,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this}}e.exports=p},207:(e,t,r)=>{const{MAX_LENGTH:s}=r(406),{re:i,t:o}=r(91),a=r(863),n=r(927);e.exports=(e,t)=>{if(t=n(t),e instanceof a)return e;if("string"!=typeof e)return null;if(e.length>s)return null;if(!(t.loose?i[o.LOOSE]:i[o.FULL]).test(e))return null;try{return new a(e,t)}catch(e){return null}}},406:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:t,MAX_SAFE_COMPONENT_LENGTH:16}},348:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},32:e=>{const t=/^[0-9]+$/,r=(e,r)=>{const s=t.test(e),i=t.test(r);return s&&i&&(e=+e,r=+r),e===r?0:s&&!i?-1:i&&!s?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},927:e=>{const t=["includePrerelease","loose","rtl"];e.exports=e=>e?"object"!=typeof e?{loose:!0}:t.filter(t=>e[t]).reduce((e,t)=>(e[t]=!0,e),{}):{}},91:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:s}=r(406),i=r(348),o=(t=e.exports={}).re=[],a=t.src=[],n=t.t={};let l=0;const c=(e,t,r)=>{const s=l++;i(s,t),n[e]=s,a[s]=t,o[s]=new RegExp(t,r?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION",`(${a[n.NUMERICIDENTIFIER]})\\.(${a[n.NUMERICIDENTIFIER]})\\.(${a[n.NUMERICIDENTIFIER]})`),c("MAINVERSIONLOOSE",`(${a[n.NUMERICIDENTIFIERLOOSE]})\\.(${a[n.NUMERICIDENTIFIERLOOSE]})\\.(${a[n.NUMERICIDENTIFIERLOOSE]})`),c("PRERELEASEIDENTIFIER",`(?:${a[n.NUMERICIDENTIFIER]}|${a[n.NONNUMERICIDENTIFIER]})`),c("PRERELEASEIDENTIFIERLOOSE",`(?:${a[n.NUMERICIDENTIFIERLOOSE]}|${a[n.NONNUMERICIDENTIFIER]})`),c("PRERELEASE",`(?:-(${a[n.PRERELEASEIDENTIFIER]}(?:\\.${a[n.PRERELEASEIDENTIFIER]})*))`),c("PRERELEASELOOSE",`(?:-?(${a[n.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[n.PRERELEASEIDENTIFIERLOOSE]})*))`),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD",`(?:\\+(${a[n.BUILDIDENTIFIER]}(?:\\.${a[n.BUILDIDENTIFIER]})*))`),c("FULLPLAIN",`v?${a[n.MAINVERSION]}${a[n.PRERELEASE]}?${a[n.BUILD]}?`),c("FULL",`^${a[n.FULLPLAIN]}$`),c("LOOSEPLAIN",`[v=\\s]*${a[n.MAINVERSIONLOOSE]}${a[n.PRERELEASELOOSE]}?${a[n.BUILD]}?`),c("LOOSE",`^${a[n.LOOSEPLAIN]}$`),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE",a[n.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*"),c("XRANGEIDENTIFIER",a[n.NUMERICIDENTIFIER]+"|x|X|\\*"),c("XRANGEPLAIN",`[v=\\s]*(${a[n.XRANGEIDENTIFIER]})(?:\\.(${a[n.XRANGEIDENTIFIER]})(?:\\.(${a[n.XRANGEIDENTIFIER]})(?:${a[n.PRERELEASE]})?${a[n.BUILD]}?)?)?`),c("XRANGEPLAINLOOSE",`[v=\\s]*(${a[n.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[n.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[n.XRANGEIDENTIFIERLOOSE]})(?:${a[n.PRERELEASELOOSE]})?${a[n.BUILD]}?)?)?`),c("XRANGE",`^${a[n.GTLT]}\\s*${a[n.XRANGEPLAIN]}$`),c("XRANGELOOSE",`^${a[n.GTLT]}\\s*${a[n.XRANGEPLAINLOOSE]}$`),c("COERCE",`(^|[^\\d])(\\d{1,${s}})(?:\\.(\\d{1,${s}}))?(?:\\.(\\d{1,${s}}))?(?:$|[^\\d])`),c("COERCERTL",a[n.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM",`(\\s*)${a[n.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",c("TILDE",`^${a[n.LONETILDE]}${a[n.XRANGEPLAIN]}$`),c("TILDELOOSE",`^${a[n.LONETILDE]}${a[n.XRANGEPLAINLOOSE]}$`),c("LONECARET","(?:\\^)"),c("CARETTRIM",`(\\s*)${a[n.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",c("CARET",`^${a[n.LONECARET]}${a[n.XRANGEPLAIN]}$`),c("CARETLOOSE",`^${a[n.LONECARET]}${a[n.XRANGEPLAINLOOSE]}$`),c("COMPARATORLOOSE",`^${a[n.GTLT]}\\s*(${a[n.LOOSEPLAIN]})$|^$`),c("COMPARATOR",`^${a[n.GTLT]}\\s*(${a[n.FULLPLAIN]})$|^$`),c("COMPARATORTRIM",`(\\s*)${a[n.GTLT]}\\s*(${a[n.LOOSEPLAIN]}|${a[n.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE",`^\\s*(${a[n.XRANGEPLAIN]})\\s+-\\s+(${a[n.XRANGEPLAIN]})\\s*$`),c("HYPHENRANGELOOSE",`^\\s*(${a[n.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[n.XRANGEPLAINLOOSE]})\\s*$`),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0.0.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}},t={};function r(s){var i=t[s];if(void 0!==i)return i.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};(()=>{"use strict";r.r(s),r.d(s,{default:()=>I});const e=require("@yarnpkg/cli"),t=require("@yarnpkg/core"),i=require("clipanion");function o(e=[]){const t=e.filter(e=>"string"==typeof e);return console.info(t.join(" ")),t}var a=r(207),n=r.n(a),l=function(e,t,r,s){var i,o=arguments.length,a=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,s);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};const c=(e=[])=>o(["npm","publish",...e]);class p extends i.Command{constructor(){super(...arguments),this.noTag=!1,this.tolerateRepublish=!1,this.canary=!1,this.all=!1}async execute(){const r=await t.Configuration.find(this.context.cwd,this.context.plugins),{project:s,workspace:o}=await t.Project.find(r,this.context.cwd);let a;if(this.all)a=s.workspaces.reduce((e,t)=>(t.manifest.private||e.push(t),e),[]);else if(this.workspaces.length>0){if(!o)throw new e.WorkspaceRequiredError(s.cwd,this.context.cwd);a=this.workspaces.map(e=>{const o=t.structUtils.parseIdent(e),a=s.getWorkspaceByIdent(o);if(a.manifest.private)throw new i.UsageError(`Workspace ${t.structUtils.prettyIdent(r,o)} is private and cannot be published. Aborting...`);return a})}if(!a||0===a.length)throw new i.UsageError("No list of workspaces were provided. Please supply at least one valid package name or '-A,--all'");for(const e of a)await this.cli.run(c([this.getTagArg(e),this.tolerateRepublishArg]),{cwd:e.cwd})}getTagArg(e){var t;if(this.noTag)return null;let r=null;if(this.canary)r="canary";else if(this.tag)r=this.tag;else{const s=n()(e.manifest.version,{includePrerelease:!0}),i=null===(t=null==s?void 0:s.prerelease)||void 0===t?void 0:t[0];"string"==typeof i&&(r=i)}return r?"--tag="+r:null}get tolerateRepublishArg(){return this.tolerateRepublish?"--tolerate-republish":null}}p.usage=i.Command.Usage({category:"Workspace-related commands",description:"Publish a list of workspaces in the project.",details:"\n      This command will publish a list of packages, or optionally, all packages of a workspace.\n\n      If a pre-release tag is detected for the package version, the package will be published under that tag instead of 'latest'.\n    "}),l([i.Command.String("--tag",{description:"The tag on the registry that the package should be attached to. '-C,--canary' will overwrite this parameter."})],p.prototype,"tag",void 0),l([i.Command.Boolean("--no-tag",{description:"Force a stable release regardless of version string."})],p.prototype,"noTag",void 0),l([i.Command.Boolean("--tolerate-republish",{description:"Warn and exit when republishing an already existing version of a package."})],p.prototype,"tolerateRepublish",void 0),l([i.Command.Boolean("-C,--canary",{description:"Tag the release as 'canary'. The standard pre-release tag for @FuelRats projects."})],p.prototype,"canary",void 0),l([i.Command.Boolean("-A,--all",{description:"Publish all public repositories in the current project."})],p.prototype,"all",void 0),l([i.Command.Rest()],p.prototype,"workspaces",void 0),l([i.Command.Path("workspaces","release")],p.prototype,"execute",null);var E=function(e,t,r,s){var i,o=arguments.length,a=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,s);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};class h extends i.Command{constructor(){super(...arguments),this.canary=!1}async execute(){const r=await t.Configuration.find(this.context.cwd,this.context.plugins);!function(e,r){r.forEach(r=>{const s="@yarnpkg/plugin-"+r;if(!e.plugins.has(s)){const o=t.structUtils.prettyIdent(e,t.structUtils.parseIdent(s)),a=t.structUtils.prettyReference(e,"yarn plugin import "+r);throw new i.UsageError(`${o} is a required plugin. Please import it by using '${a}'`)}})}(r,["workspace-tools","version"]);const{project:s,workspace:a}=await t.Project.find(r,this.context.cwd);if(!a)throw new e.WorkspaceRequiredError(s.cwd,this.context.cwd);const n=((e=[])=>o(["version","--deferred",...e]))([this.strategy[0]]);await this.cli.run(((e=[])=>o(["workspaces","foreach",...e]))(n)),await this.cli.run(n),await this.cli.run(((e=[])=>o(["version","apply","--all",...e]))([this.tagArg]))}get tagArg(){return this.canary?"--prerelease=canary.%n":this.tag?`--prerelease=${this.tag}.%n`:null}}h.usage=i.Command.Usage({category:"Workspace-related commands",description:"Update the project-wide fixed semver.",details:"\n      This command will bump the version number of all workspaces in the project, then the project package itself.\n\n      Use the `-C,--canary` flag to set the version to a canary release.\n    ",examples:[["Bump the minor semver project-wide","yarn workspaces version minor"],["Bump the project-wide semver to a new minor-ver pre-release","yarn workspaces version minor --canary"]]}),E([i.Command.String("--tag",{description:"Tag the release with the given tag. '-C,--canary' will overwrite this parameter."})],h.prototype,"tag",void 0),E([i.Command.Boolean("-C,--canary",{description:"Tag the release as 'canary'. The standard pre-release tag for @FuelRats projects."})],h.prototype,"canary",void 0),E([i.Command.Proxy({required:1})],h.prototype,"strategy",void 0),E([i.Command.Path("workspaces","version")],h.prototype,"execute",null);const I={commands:[h,p]}})(),plugin=s})();
return plugin;
}
};